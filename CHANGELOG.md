# Translate-Chat 更新日志

## v0.1.3 (2025-01-27)

### 🚀 新功能

#### 加密存储系统
- **新增加密存储模块** (`utils/secure_storage.py`)
  - 支持跨平台加密存储API密钥
  - 使用设备唯一标识符生成加密密钥
  - 自动处理桌面端和Android端存储路径
  - 完善的错误处理和降级机制

#### 配置管理器升级
- **配置管理器增强** (`config_manager.py`)
  - 支持环境变量、加密存储、默认配置三种方式
  - 按优先级自动加载配置
  - 新增配置保存和清除功能
  - 改进配置状态显示和来源识别

#### 图形界面优化
- **配置界面升级** (`ui/sys_config_window.py`)
  - 移除写入shell配置文件的逻辑
  - 使用加密存储保存配置
  - 改进配置检查和状态显示
  - 优化用户体验，一次配置永久有效

#### 依赖管理
- **新增加密库依赖**
  - 添加 `cryptography>=3.4.8` 到依赖列表
  - 更新桌面版和Android版requirements文件
  - 完善依赖检查和安装说明

### 🔧 改进

#### 主程序改进
- 更新配置验证和错误提示
- 改进用户引导，推荐使用图形界面配置
- 优化配置状态显示

#### 文档更新
- 更新README配置说明，强调加密存储机制
- 添加详细的配置优先级和存储位置说明
- 更新安全说明和最佳实践
- 完善用户和开发者使用指南

### 🛡️ 安全性

- **加密存储**：API密钥不再明文存储，使用本地加密
- **设备绑定**：加密密钥基于设备唯一标识符生成
- **降级机制**：加密失败时提供安全的降级方案
- **权限控制**：存储文件仅应用可访问

### 📱 平台支持

- **桌面端**：macOS、Linux、Windows统一体验
- **Android端**：支持Termux和APK安装
- **跨平台**：配置自动适配不同平台存储路径

### 🔄 用户体验

- **一次配置**：用户只需配置一次，后续自动加载
- **开发者友好**：保持环境变量支持，不影响开发工作流
- **错误处理**：完善的错误提示和解决方案
- **状态显示**：实时显示配置状态和来源

---

## v0.1.2 (2025-01-27)

### 🚀 新功能

#### 环境变量配置支持
- **新增配置管理器** (`config_manager.py`)
  - 支持从环境变量读取API配置
  - 支持从配置文件读取API配置
  - 自动检测运行平台（macOS/Linux/Android）
  - 配置验证和状态检查

#### 跨平台配置脚本
- **macOS/Linux/Android脚本** (`scripts/setup_env.sh`)
  - 交互式配置API密钥
  - 配置检查和验证
  - 配置移除功能
  - 自动备份原配置文件

- **Windows脚本** (`scripts/setup_env.bat`)
  - 交互式配置API密钥
  - 配置检查功能
  - 支持PowerShell和CMD

#### 图形界面配置
- **独立配置应用** (`sys_config_app.py`)
  - 用户友好的图形界面
  - 支持桌面和手机系统
  - 实时配置验证
  - 一键保存到环境变量
  - 集成帮助信息

- **配置启动脚本** (`setup_config.py`)
  - 简化的启动方式
  - 依赖检查
  - 错误处理和备选方案

#### 中文字体支持
- **Noto Sans SC字体**: 支持中文界面显示
- **自动字体注册**: 应用启动时自动配置
- **回退机制**: 字体缺失时使用系统默认字体

#### 配置优先级系统
1. **环境变量** - 最高优先级
2. **默认配置** - 最低优先级（仅开发测试）

### 🔧 改进

#### 主程序改进
- 启动时自动验证配置
- 友好的错误提示
- 配置状态显示

#### 文档更新
- 新增详细配置指南 (`docs/config_guide.md`)
- 更新README配置说明，添加配置优先级机制和统一存储机制说明
- 添加多平台配置示例
- 详细说明三种配置方式的工作原理和存储位置

### 🛡️ 安全性

- 环境变量配置更安全，避免密钥泄露
- 配置文件自动备份
- 配置验证机制

### 📱 平台支持

- **macOS**: 支持zsh和bash
- **Linux**: 支持bash和zsh
- **Android**: 支持Termux环境
- **Windows**: 支持PowerShell和CMD

### 🔄 简化配置

- 移除config.py和config_template.py文件，简化配置管理
- 统一使用环境变量配置方式
- 所有模块通过config_manager访问配置

---

## v0.1.1 (2025-07-25)

### 🎯 初始版本
- 基础ASR和翻译功能
- KivyMD界面
- 配置文件方式配置API密钥 