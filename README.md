# Translate-Chat

**æ–‡ä»¶å(File):** README.md  
**ç‰ˆæœ¬(Version):** v2.0.1  
**ä½œè€…(Author):** æ·±åœ³çŽ‹å“¥ & AI  
**åˆ›å»ºæ—¥æœŸ(Created):** 2025/7/28  
**ç®€ä»‹(Description):** åŸºäºŽç«å±±å¼•æ“ŽASRå’ŒLLMçš„å®žæ—¶è¯­éŸ³ç¿»è¯‘å·¥å…·ï¼Œä¸“æ³¨æ¡Œé¢ç«¯ä½“éªŒ

---

## ðŸ§­ é¡¹ç›®ç®€ä»‹ / Project Overview

Translate Chat æ˜¯ä¸€æ¬¾æ¡Œé¢ç«¯ï¼ˆmacOSã€Linuxï¼‰è½»é‡çº§ã€åŸºäºŽç«å±±å¼•æ“Žçš„å®žæ—¶è¯­éŸ³è½¬æ–‡å­—ä¸Žä¸­è‹±äº’è¯‘è½¯ä»¶ã€‚ä¸»ç•Œé¢é‡‡ç”¨ KivyMD æ¡†æž¶ï¼Œæ”¯æŒæµå¼è¯­éŸ³è¯†åˆ«ã€è‡ªåŠ¨è¯­ç§æ£€æµ‹ä¸Žç¿»è¯‘ï¼Œå¹¶ä»¥æ°”æ³¡å¯¹ç…§æ–¹å¼å±•ç¤ºåŽŸæ–‡ä¸Žè¯‘æ–‡ã€‚

---

## ä¸»è¦åŠŸèƒ½ / Features
- ðŸŽ¤ å®žæ—¶è¯­éŸ³è½¬æ–‡å­—ï¼ˆç«å±± ASR æµå¼è¯†åˆ«ï¼‰
- ðŸŒ è‡ªåŠ¨è¯­ç§æ£€æµ‹ï¼ˆä¸­è‹±äº’è¯‘ï¼‰
- ðŸ’¬ è¯†åˆ«ç»“æžœä¸Žç¿»è¯‘å¯¹ç…§æ°”æ³¡å±•ç¤º
- âš¡ **å¹¶è¡Œå¼‚æ­¥å¤„ç†**ï¼šASRè¯†åˆ«ä¸Žç¿»è¯‘å®Œå…¨åˆ†ç¦»ï¼Œç¿»è¯‘ä¸é˜»å¡žå®žæ—¶è¯†åˆ«
- ðŸ”„ å¼‚æ­¥ç¿»è¯‘é˜Ÿåˆ—ï¼Œæ”¯æŒå¹¶å‘ç¿»è¯‘å¤„ç†
- ðŸ“¥ **å¯¹è¯è®°å½•å¯¼å‡º**ï¼šæ”¯æŒå°†æ‰€æœ‰å¯¹è¯è®°å½•ä¸‹è½½ä¸ºtxtæ–‡ä»¶
- â° è¶…æ—¶è‡ªåŠ¨å›ºåŒ–åˆ†å¥æç¤º
- ðŸ”„ ä¸€é”®é‡ç½®ã€ç¿»è¯‘æ˜¾ç¤ºå¼€å…³
- ðŸ–¥ï¸ æ¡Œé¢ç«¯ä¼˜åŒ–ï¼šmacOSã€Linuxï¼ˆARM/x86_64ï¼‰
- ðŸ”¥ çƒ­è¯æ£€æµ‹ä¸Žè¯´è¯äººåˆ‡æ¢æ£€æµ‹
- ðŸ”’ æ™ºèƒ½ä»¤ç‰Œç®¡ç†ï¼ˆåŠ¨æ€åˆ·æ–°ã€è¿‡æœŸå¤„ç†ï¼‰
- ðŸ›¡ï¸ å¢žå¼ºç½‘ç»œé”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- ðŸ“¦ è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬ï¼ˆUbuntu/macOSï¼‰

---

## æ›´æ–°æ—¥å¿— / Changelog

### v2.0.1 (2025/7/28)
- ðŸŽ¨ **ç•Œé¢ä¼˜åŒ–**: å®Œå–„ç•Œé¢æ˜¾ç¤ºï¼Œè§£å†³ä¸­æ–‡æ˜¾ç¤ºé—®é¢˜
- ðŸ–¥ï¸ **ç”¨æˆ·ä½“éªŒ**: ä¼˜åŒ–ç•Œé¢å¸ƒå±€å’Œæ˜¾ç¤ºæ•ˆæžœ
- ðŸ”§ **ç¨³å®šæ€§æå‡**: ä¿®å¤ç•Œé¢ç›¸å…³çš„æ˜¾ç¤ºé—®é¢˜

### v2.0.0 (2025/7/25)
- ðŸš€ **é‡å¤§é‡æž„**: ç§»é™¤Androidæ”¯æŒï¼Œä¸“æ³¨æ¡Œé¢ç«¯ä½“éªŒ
- ðŸ–¥ï¸ **æ¡Œé¢ä¼˜åŒ–**: ä¼˜åŒ–macOSå’ŒLinuxå¹³å°æ€§èƒ½
- ðŸŽ¯ **ç®€åŒ–ä¾èµ–**: ç§»é™¤SDL2ç­‰Androidç›¸å…³ä¾èµ–
- ðŸ“¦ **ARMæ”¯æŒ**: æ›´å¥½çš„ARM Linuxå¹³å°å…¼å®¹æ€§
- ðŸ”§ **ä»£ç æ¸…ç†**: ç§»é™¤Androidç›¸å…³ä»£ç å’Œé…ç½®

### v0.1.2 (2025/7/25)
- ðŸš€ **é‡å¤§ä¼˜åŒ–**: é‡æž„ä¸ºå¹¶è¡Œå¼‚æ­¥æž¶æž„ï¼ŒASRè¯†åˆ«ä¸Žç¿»è¯‘å®Œå…¨åˆ†ç¦»
- âš¡ **æ€§èƒ½æå‡**: ç¿»è¯‘ä¸å†é˜»å¡žASRå®žæ—¶è¯†åˆ«ï¼Œå¤§å¹…æå‡å“åº”é€Ÿåº¦
- ðŸ”„ **å¼‚æ­¥é˜Ÿåˆ—**: ä½¿ç”¨å¼‚æ­¥é˜Ÿåˆ—å¤„ç†ç¿»è¯‘ä»»åŠ¡ï¼Œæ”¯æŒå¹¶å‘ç¿»è¯‘
- ðŸ“¥ **æ–°å¢žä¸‹è½½åŠŸèƒ½**: æ”¯æŒå°†æ‰€æœ‰å¯¹è¯è®°å½•å¯¼å‡ºä¸ºtxtæ–‡ä»¶
- ðŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å¢žå¼ºç½‘ç»œè¶…æ—¶å’Œé‡è¯•æœºåˆ¶ï¼Œæé«˜ç¨³å®šæ€§
- ðŸ“ **ä»£ç ä¼˜åŒ–**: é‡æž„ç¿»è¯‘å’ŒASRå®¢æˆ·ç«¯ï¼Œæå‡ä»£ç è´¨é‡

### v0.1.1 (2025/7/25)
- âœ¨ æ–°å¢ž Ubuntu å’Œ macOS è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬
- ðŸ“š æ–°å¢žå¼€å‘æ–‡æ¡£å’Œæ‰“åŒ…è¯´æ˜Ž
- ðŸ”§ ä¼˜åŒ– buildozer é…ç½®
- ðŸ†• æ–°å¢žçƒ­è¯æ£€æµ‹å’Œè¯´è¯äººåˆ‡æ¢æ£€æµ‹åŠŸèƒ½
- ðŸ”’ æ–°å¢žä»¤ç‰Œç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒåŠ¨æ€ä»¤ç‰Œåˆ·æ–°å’Œè¿‡æœŸå¤„ç†
- ðŸ›¡ï¸ ä¿®å¤å®‰å…¨æ¼æ´žï¼Œç§»é™¤ç¡¬ç¼–ç APIå¯†é’¥
- ðŸ› ä¿®å¤ç•Œé¢æ˜¾ç¤ºé—®é¢˜
- ðŸ“ å®Œå–„é¡¹ç›®æ–‡æ¡£ç»“æž„

### v0.1.0 (2025/1/25)
- ðŸŽ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ðŸŽ¤ å®žçŽ°åŸºç¡€è¯­éŸ³è¯†åˆ«å’Œç¿»è¯‘åŠŸèƒ½
- ðŸ–¥ï¸ æ”¯æŒæ¡Œé¢å’ŒAndroidå¹³å°

---

## ç›®å½•ç»“æž„ / Directory Structure

```
Translate-Chat/
  â”œâ”€â”€ asr_client.py                # ç«å±±ASRå®¢æˆ·ç«¯
  â”œâ”€â”€ audio_capture.py             # æ¡Œé¢ç«¯éŸ³é¢‘é‡‡é›†å…¥å£
  â”œâ”€â”€ audio_capture_pyaudio.py     # æ¡Œé¢ç«¯éŸ³é¢‘é‡‡é›†å®žçŽ°
  â”œâ”€â”€ lang_detect.py               # è¯­è¨€æ£€æµ‹
  â”œâ”€â”€ main.py                      # ç¨‹åºä¸»å…¥å£ï¼ˆKivyMD UIï¼‰
  â”œâ”€â”€ hotwords.py                  # çƒ­è¯æ£€æµ‹åŠŸèƒ½
  â”œâ”€â”€ speaker_change_detector.py.disabled   # è¯´è¯äººåˆ‡æ¢æ£€æµ‹ï¼ˆå·²ç¦ç”¨ï¼‰
  â”œâ”€â”€ requirements-desktop.txt     # æ¡Œé¢ä¾èµ–
  â”œâ”€â”€ run.sh                       # æ¡Œé¢ç«¯å¯åŠ¨è„šæœ¬
  â”œâ”€â”€ translator.py                # ç¿»è¯‘é€»è¾‘
  
  â”œâ”€â”€ ui/
  â”‚     â”œâ”€â”€ main_window_kivy.py    # KivyMDä¸»ç•Œé¢
  â”‚     â”œâ”€â”€ main_window_qt.py      # PyQtå¤‡ç”¨ç•Œé¢
  â”‚     â”œâ”€â”€ font_test.py           # å­—ä½“æµ‹è¯•
  â”‚     â””â”€â”€ UI_README.md           # UIè¯´æ˜Žæ–‡æ¡£
  â”œâ”€â”€ scripts/
  â”‚     â”œâ”€â”€ build_linux_desktop.sh      # macOSäº¤å‰ç¼–è¯‘Linuxæ¡Œé¢åº”ç”¨è„šæœ¬
  â”‚     â”œâ”€â”€ linux_dependency_manager.sh # Linuxæ¡Œé¢åº”ç”¨ä¾èµ–ç®¡ç†è„šæœ¬
  â”‚     â”œâ”€â”€ test_linux_build.sh         # Linuxæ‰“åŒ…çŽ¯å¢ƒæµ‹è¯•è„šæœ¬
  â”‚     â””â”€â”€ common_build_utils.sh       # é€šç”¨å·¥å…·å‡½æ•°
  â”œâ”€â”€ utils/
  â”‚     â”œâ”€â”€ __init__.py
  â”‚     â”œâ”€â”€ file_downloader.py
  â”‚     â””â”€â”€ secure_storage.py
  â”œâ”€â”€ docs/
  â”‚     â”œâ”€â”€ config_guide.md
  â”‚     â”œâ”€â”€ linux_desktop_build.md
  â”‚     â”œâ”€â”€ macos_quick_start.md
  â”‚     â””â”€â”€ sys_config_ui.md
  â”œâ”€â”€ config_manager.py            # é…ç½®ç®¡ç†
  â”œâ”€â”€ setup_config.py              # é…ç½®å¯åŠ¨è„šæœ¬
  â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜Ž
```

---

## å¿«é€Ÿå¼€å§‹ / Quick Start

### 1. çŽ¯å¢ƒè¦æ±‚
- **Python**: 3.9-3.11 (æŽ¨è3.10)
- **ç³»ç»Ÿ**: macOS 10.15+ æˆ– Linux (Ubuntu 18.04+)
- **å†…å­˜**: å»ºè®®4GBä»¥ä¸Š
- **ç£ç›˜**: å»ºè®®2GBä»¥ä¸Šå¯ç”¨ç©ºé—´

### 2. ä¸€é”®å¯åŠ¨
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/Translate-Chat.git
cd Translate-Chat

# ä¸€é”®å¯åŠ¨ï¼ˆè‡ªåŠ¨å®‰è£…ä¾èµ–ï¼‰
chmod +x run.sh
./run.sh
```

### 3. æ‰‹åŠ¨å®‰è£…
```bash
# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements-desktop.txt

# è¿è¡Œåº”ç”¨
python3 main.py
```

---

## ä¾èµ–å®‰è£… / Dependencies

### æ¡Œé¢ç«¯ä¾èµ–
- **Python**: 3.9-3.11 (æŽ¨è3.10)
- **PyAudio**: éŸ³é¢‘é‡‡é›†
- **Kivy**: >=2.3.0,<3.0.0
- **KivyMD**: ==1.1.1
- **websocket-client**: ç½‘ç»œé€šä¿¡
- **aiohttp**: å¼‚æ­¥HTTP
- **cryptography**: åŠ å¯†å­˜å‚¨
- **numpy/scipy**: éŸ³é¢‘å¤„ç†
- **webrtcvad**: è¯­éŸ³æ´»åŠ¨æ£€æµ‹

### Linux æ¡Œé¢åº”ç”¨æ‰“åŒ…çŽ¯å¢ƒ
- **macOS**: Docker Desktop, Python 3.9-3.11
- **å†…å­˜**: å»ºè®®8GBä»¥ä¸Š
- **ç£ç›˜**: å»ºè®®15GBä»¥ä¸Šå¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿žæŽ¥ä¸‹è½½Dockeré•œåƒ

---

## APIå¯†é’¥é…ç½® / API Key Configuration

æœ¬ç³»ç»Ÿæ”¯æŒä¸‰ç§é…ç½®æ–¹å¼ï¼ŒæŒ‰ä¼˜å…ˆçº§æŽ’åºï¼š

### é…ç½®ä¼˜å…ˆçº§æœºåˆ¶

1. **çŽ¯å¢ƒå˜é‡** (å¼€å‘è€…æ¨¡å¼)
2. **åŠ å¯†å­˜å‚¨** (ç”¨æˆ·æ¨¡å¼) 
3. **é»˜è®¤é…ç½®** (å…œåº•æ¨¡å¼)

### é…ç½®æ–¹æ³•

#### æ–¹æ³•1: å›¾å½¢ç•Œé¢é…ç½® (æŽ¨è)
```bash
python3 setup_config.py
```

#### æ–¹æ³•2: çŽ¯å¢ƒå˜é‡é…ç½®
```bash
export ASR_APP_ID="your_asr_app_id"
export ASR_ACCESS_KEY="your_asr_access_key"
export LLM_API_KEY="your_llm_api_key"
python3 main.py
```

#### æ–¹æ³•3: æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶
```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano ~/.translate_chat/config.json
```

### æ‰€éœ€APIå¯†é’¥

1. **ç«å±±å¼•æ“ŽASR** (è¯­éŸ³è¯†åˆ«)
   - ASR_APP_ID: åº”ç”¨ID
   - ASR_ACCESS_KEY: è®¿é—®å¯†é’¥

2. **ç«å±±å¼•æ“ŽLLM** (ç¿»è¯‘æœåŠ¡)
   - LLM_API_KEY: APIå¯†é’¥

---

## ä½¿ç”¨è¯´æ˜Ž / Usage

### åŸºæœ¬æ“ä½œ
1. **å¯åŠ¨åº”ç”¨**: è¿è¡Œ `./run.sh` æˆ– `python3 main.py`
2. **é…ç½®API**: é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨å¯åŠ¨é…ç½®ç•Œé¢
3. **å¼€å§‹å½•éŸ³**: ç‚¹å‡»å½•éŸ³æŒ‰é’®å¼€å§‹è¯­éŸ³è¯†åˆ«
4. **æŸ¥çœ‹ç»“æžœ**: è¯†åˆ«ç»“æžœå’Œç¿»è¯‘ä¼šå®žæ—¶æ˜¾ç¤º
5. **å¯¼å‡ºè®°å½•**: ç‚¹å‡»ä¸‹è½½æŒ‰é’®å¯¼å‡ºå¯¹è¯è®°å½•

### é«˜çº§åŠŸèƒ½
- **çƒ­è¯æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«å’Œæ ‡è®°é‡è¦è¯æ±‡
- **è¯´è¯äººåˆ‡æ¢**: æ£€æµ‹ä¸åŒè¯´è¯äººçš„è¯­éŸ³
- **å¼‚æ­¥ç¿»è¯‘**: ç¿»è¯‘ä¸é˜»å¡žå®žæ—¶è¯†åˆ«
- **é”™è¯¯é‡è¯•**: è‡ªåŠ¨å¤„ç†ç½‘ç»œé”™è¯¯å’Œé‡è¯•

---

## æ‰“åŒ…éƒ¨ç½² / Build & Deploy

### Linux æ¡Œé¢åº”ç”¨æ‰“åŒ…

#### macOSç”¨æˆ·ï¼ˆäº¤å‰ç¼–è¯‘ï¼‰
```bash
# 1. æµ‹è¯•Linuxæ‰“åŒ…çŽ¯å¢ƒï¼ˆæŽ¨èï¼‰
./scripts/test_linux_build.sh

# 2. ä¸‹è½½Linuxä¾èµ–åŒ…ï¼ˆå¯é€‰ï¼Œç”¨äºŽåŠ é€Ÿæž„å»ºï¼‰
./scripts/linux_dependency_manager.sh

# 3. æž„å»ºLinuxæ¡Œé¢åº”ç”¨
./scripts/build_linux_desktop.sh
```

### æ‰“åŒ…è„šæœ¬ç‰¹ç‚¹
- ðŸš€ **è‡ªåŠ¨åŒ–é…ç½®**ï¼šè‡ªåŠ¨å®‰è£…ä¾èµ–ã€é…ç½®çŽ¯å¢ƒ
- ðŸ‡¨ðŸ‡³ **å›½å†…é•œåƒ**ï¼šä½¿ç”¨æ¸…åŽæºåŠ é€Ÿä¸‹è½½
- ðŸ–¥ï¸ **æ¡Œé¢ç«¯ä¼˜åŒ–**ï¼šä¸“æ³¨macOSå’ŒLinuxå¹³å°
- ðŸ“š **è¯¦ç»†æ–‡æ¡£**ï¼šå®Œæ•´çš„ä½¿ç”¨è¯´æ˜Žå’Œæ•…éšœæŽ’é™¤
- ðŸ³ **Dockeräº¤å‰ç¼–è¯‘**ï¼šæ”¯æŒmacOSäº¤å‰ç¼–è¯‘Linuxåº”ç”¨

### Linux æ¡Œé¢åº”ç”¨æ‰“åŒ…

è¯¦ç»†è¯´æ˜Žè¯·å‚è€ƒï¼š[Linuxæ¡Œé¢åº”ç”¨æ‰“åŒ…æŒ‡å—](docs/linux_desktop_build.md)

---

## æ•…éšœæŽ’é™¤ / Troubleshooting

### å¸¸è§é—®é¢˜

#### 1. éŸ³é¢‘è®¾å¤‡é—®é¢˜
```bash
# Linuxä¸‹å®‰è£…PortAudio
sudo apt-get install portaudio19-dev

# macOSä¸‹å®‰è£…PortAudio
brew install portaudio
```

#### 2. Pythonç‰ˆæœ¬é—®é¢˜
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python3 --version

# æŽ¨èä½¿ç”¨Python 3.10
```

#### 3. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# ä½¿ç”¨å›½å†…é•œåƒ
pip install -r requirements-desktop.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

#### 4. æƒé™é—®é¢˜
```bash
# ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™
chmod +x run.sh
chmod +x scripts/*.sh
```

#### 5. PyInstallerå…¼å®¹æ€§é—®é¢˜
```bash
# å¦‚æžœé‡åˆ°typingåŒ…å…¼å®¹æ€§é”™è¯¯ï¼Œè¿è¡Œä¿®å¤è„šæœ¬
./scripts/fix_pyinstaller_compatibility.sh

# æˆ–è€…æ‰‹åŠ¨ç§»é™¤typingåŒ…
pip uninstall -y typing
```

---

## æŠ€æœ¯æ”¯æŒ / Support

å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æ£€æŸ¥çŽ¯å¢ƒè¦æ±‚æ˜¯å¦æ»¡è¶³
2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ä¿¡æ¯
3. å‚è€ƒæ•…éšœæŽ’é™¤æŒ‡å—
4. æäº¤Issueå¹¶æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

---

## è´¡çŒ®æŒ‡å— / Contributing

æ¬¢è¿Žè´¡çŒ®ä»£ç å’Œæ”¹è¿›å»ºè®®ï¼š

1. Forké¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç æ›´æ”¹
4. åˆ›å»ºPull Request
5. ç­‰å¾…ä»£ç å®¡æŸ¥

---

*æœ¬æ–‡æ¡£æœ€åŽæ›´æ–°: 2025/7/28* 
- æ·±åœ³çŽ‹å“¥ & AI 